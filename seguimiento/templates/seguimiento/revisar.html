{%extends "base.html"%}
{%load static%}

{%block content%}
<div class="section grey">
<div class="container">


<div id="revisando"class="row">

<ul class="col m6 collection with-header">

        <li class="collection-header">Nombre</li>
        <li class="collection-item"><h5>{{mensaje.nombre}}</h5></li>

        <li class="collection-header">Teléfono</li>

        <li class="collection-item">
          <a href="tel:{{mensaje.tel}}"><h5>{{mensaje.tel}}</h5></a>
        </li>
        
        <li class="collection-header">E-Mail</li>
        <li class="collection-item">
        <a href="mailto:{{mensaje.mail}}?subject=Gracias por Tu interez">
        <h5>{{mensaje.mail}}</h5>
        </a>
        </li>

      </ul>

<ul class="col m6 collection with-header">

        <li class="collection-header">Plazo</li>
        <li class="collection-item"><h5>{{mensaje.plazo}}</h5></li>
        <li class="collection-header">Tamaño</li>
        <li class="collection-item"><h5>{{mensaje.size}}</h5></li>
        
        <li class="collection-header">Fecha de llegada</li>
        <li class="collection-item"><h5>{{mensaje.date}}</h5></li>
      </ul>

<form method="post" action="{%url '_add-coment' mensaje.id%}">
{%csrf_token%}
     <div class="col m12 white row">

     <div class="white input-field col m6">
          <textarea name="coment"class="materialize-textarea">{{mensaje.comentario}}</textarea>
          <label for="textarea1">Comentar</label>
        </div>

      <div class="col m6 row">

           <div class="input-field m12">
        <input value="{{mensaje.fecha_llamada}}"
        name="fecha_llamada"id="fecha_llamada" type="date" class="datepicker">
        <label for "fecha">Fecha de Llamada</label>
        </div>

        <div class="input-field m12">
        <input value="{{mensaje.contacto}}"
        name="contacto"id="contacto" type="date" class="datepicker">
        <label for "fecha">Proxima llamada</label>
        </div>

     </div>
     </div>

   

</div>
        <a class="waves-effect waves-light btn right modal-trigger red" href="#modal1">
        <i class="material-icons left">done_all</i>
        Eliminar!
        </a>


         <button type="submit" class="waves-effect waves-light btn right orange"><i class="material-icons left">done</i>Pendiente</button>

         <a class="waves-effect waves-light btn right modal-trigger blue" href="#modal2">
        <i class="material-icons left">info_outline</i>
        Editar
        </a>
</form>

         <a href="#modal3" class="waves-effect waves-light btn left green modal-trigger"><i class="material-icons left">youtube_searched_for</i>Volver</a>





</div>
</div>


<!-- Modal Structure -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h4>Borrar Formulario</h4>
      <p>¿Estas seguro de borrar este formulario? se borrará permanentemente.</p>
    </div>
    <div class="modal-footer">
      <a href="{%url '_borra' mensaje.id%}" class="red modal-action modal-close waves-effect waves-green btn-flat">Borrar</a>
      <a href="#" class="modal-action modal-close waves-effect waves-green btn-flat">Cancelar</a>
    </div>
  </div>

  <!-- Modal VOLVER -->
  <div id="modal3" class="modal">
    <div class="modal-content">
      <h4>NO SE HAN GUARDADO LOS CAMBIOS</h4>
      <p>¿Estas seguro de salir sin guardar los cambios?</p>
    </div>
    <div class="modal-footer">
      <a href="{%url '_inicio'%}" class="red modal-action modal-close waves-effect waves-green btn-flat white-text">Salir</a>
      <a href="#revisando" class="modal-action modal-close waves-effect waves-green btn-flat">Cancelar</a>
    </div>
  </div>

  <!--Modal de edición-->

    <div id="modal2" class="modal row white">
    <form method="post" class="modal-content col s12">
    {% csrf_token %}
      <div class="row">

        <div class="input-field col s6">
          <i class="material-icons prefix">account_circle</i>
          <input name="nombre"value="{{mensaje.nombre}}"type="text" class="validate">
          <label for="icon_prefix">Nombre</label>
        </div>

        <div class="input-field col s6">
          <i class="material-icons prefix">phone</i>
          <input name="tel"value="{{mensaje.tel}}" type="tel" class="validate">
          <label for="icon_telephone">Teléfono</label>
        </div>

        <div class="input-field col s6">
          <i class="material-icons prefix">email</i>
          <input name="mail"value="{{mensaje.mail}}" type="email" class="validate">
          <label for="icon_telephone">E-mail</label>
        </div>

        <div class="input-field col s6">
          <i class="material-icons prefix">input</i>
          <input name="size"value="{{mensaje.size}}" type="text" class="validate">
          <label for="icon_telephone">Tamaño</label>
        </div>

        <div class="input-field col s6">
          <i class="material-icons prefix">av_timer</i>
          <input name="plazo"value="{{mensaje.plazo}}" type="text" class="validate">
          <label for="icon_telephone">Plazo</label>
        </div>


      </div>


         <button type="submit" class="waves-effect waves-light btn right green"><i class="material-icons left">done</i>Actualizar</button>

         <a href="#"class="modal-action modal-close waves-effect waves-light btn left red"><i class="material-icons left">youtube_searched_for</i>Cancelar</a>

        
        



    </form>
  </div>

  <script>
jQuery(document).ready(function($) {

  if (window.history && window.history.pushState) {

    window.history.pushState('forward', null, './#forward');

    $(window).on('popstate', function() {
      alert('Back button was pressed.');
    });

  }
});
  </script>


{%endblock%}

{%block scripts%}
  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
 <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
  <script>
  $(document).ready(function(){
    $(".button-collapse").sideNav();
    $('select').material_select();

    $('.datepicker').pickadate({
    selectMonths: true, // Creates a dropdown to control month
    selectYears: 15 // Creates a dropdown of 15 years to control year
  });

    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
    $('.modal-trigger').leanModal();
    
  })
  </script>
  <script>
    $(function() {
  $('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top
        }, 1000);
        return false;
      }
    }
  });
});
  </script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72131006-1', 'auto');
  ga('send', 'pageview');

</script>

<!--Para detectar que se sale de la pagina-->
  <script>
jQuery(document).ready(function($) {

  if (window.history && window.history.pushState) {

    window.history.pushState('forward', null, './#forward');

    $(window).on('popstate', function() {
      alert('¡NO SE HAN GUARDADO LOS CAMBIOS!');
    });

  }
});
  </script>

{%endblock scripts%}